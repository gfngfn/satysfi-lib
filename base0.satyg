@stage: persistent

% short-circuit operators
% example:
%   if (i < String.length s) &&& (fun () -> Char.equal (Char.at i s) Char.space) then ...
let ( &&& ) b1 b2f = if b1 then b2f () else false

let ( ||| ) b1 b2f = if b1 then true else b2f ()


type 'a 'b either = Left of 'a | Right of 'b